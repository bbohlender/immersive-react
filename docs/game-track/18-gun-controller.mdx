---
title: Gun Controller
description: 
nav: 18
---

We begin our target shooting game by adding a custom gun model to the right controller.

<Sandpack
  template="react-ts"
  customSetup={{
    dependencies: {
      'three': '~0.168.0',
      '@react-three/fiber': 'latest',
      '@react-three/drei': 'latest',
      '@react-three/xr': 'latest',
    },
  }}
  files={{
    '/App.tsx': `import { Canvas, useFrame } from "@react-three/fiber";
import { useState, useRef } from "react";
import { useGLTF, Environment } from "@react-three/drei";
import { createXRStore, XR } from "@react-three/xr";

const store = createXRStore({ emulate: { inject: true } });

export default function App() {
  return (<>
    <button style={{ position: "absolute", zIndex: "1" }} onClick={() => store.enterVR()}>
        Enter VR
    </button>
    <Canvas style={{ position: "absolute", inset: "0", touchAction: "none" }}>
      <XR store={store}>
        <Environment preset="warehouse" />
        <MyComponent />
        <MyModel />
      </XR>
    </Canvas>
    </>
  )
}

function MyModel() {
    const { scene } = useGLTF("https://www.immersive-react.com/shoe.glb")
    return <primitive object={scene} />
}

function MyComponent() {
    const [red, setRed] = useState(true)
    const ref = useRef<Mesh>(null)
    useFrame(() => ref.current?.rotateY(0.01)) 
    return <mesh ref={ref} onClick={() => setRed(!red)} position={[ 0, 0, 0 ]}>
        <boxGeometry/>
        <meshBasicMaterial color={red ? "red" : "blue"} />
    </mesh>
}

`}}/>

First, we remove the `MyComponent` and `MyModel` components and their usage inside of the `Canvas`.


Next, we add a `Gun` component that into `App.tsx`. The `Gun` component renders a basic gun model using meshes, with cube geometries, and standard materials. We are using a **group**, which allows to group our meshes together.

```tsx
export function Gun() {
  return (
    <group rotation-x={-Math.PI / 8}>
      <mesh>
        <boxGeometry args={[0.035, 0.05, 0.16]} />
        <meshStandardMaterial color="orange" />
      </mesh>
      <mesh rotation-x={Math.PI / 2} position={[0, -0.05, 0.05]}>
        <boxGeometry args={[0.025, 0.04, 0.1]} />
        <meshStandardMaterial color="grey" />
      </mesh>
    </group>
  );
};
```

To use our new `Gun` component as the right controller, we add it to the `createXRStore` configuration like this:

```tsx
const store = createXRStore({ controller: { right: Gun }, emulate: { inject: true } });
```

This overrides the default right controller, displaying the custom gun model instead, while the left controller still shows the default controller model.
